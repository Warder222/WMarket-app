{% extends 'base.html' %}

{% block style %}
<style>
    .blocked-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        padding: 20px;
        text-align: center;
    }
    
    .blocked-icon {
        font-size: 72px;
        color: var(--error-color);
        margin-bottom: 20px;
    }
    
    .unblocked-icon {
        font-size: 72px;
        color: var(--success-color);
        margin-bottom: 20px;
    }
    
    .blocked-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 16px;
    }
    
    .unblocked-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 16px;
        color: var(--success-color);
    }
    
    .blocked-message {
        margin-bottom: 24px;
        color: var(--secondary-text);
    }
    
    .blocked-until {
        font-weight: bold;
        color: var(--error-color);
        margin-bottom: 32px;
    }
    
    .unblocked-message {
        font-weight: bold;
        color: var(--success-color);
        margin-bottom: 32px;
    }
    
    .blocked-contact {
        font-size: 14px;
        color: var(--secondary-text);
    }
    
    .hidden {
        display: none;
    }
</style>
{% endblock %}

{% block content %}
<div class="blocked-container">
    <!-- –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
    <div id="blockedState">
        <div class="blocked-icon">üö´</div>
        <div class="blocked-title">–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</div>
        <div class="blocked-message">
            –í—ã –±—ã–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –º–∞—Ä–∫–µ—Ç–∞.
            <br>
            –ï—Å–ª–∏ –í—ã —Å—á–∏—Ç–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –æ—à–∏–±–∫–∞,<br>—Å–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:<br>@Wmarket_app (—Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–Ω–∞–ª—É) 
            <br>–∏–ª–∏<br> 
            @Wmarket_support
        </div>
        <div class="blocked-until" id="blockedUntil">
            –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: –∑–∞–≥—Ä—É–∑–∫–∞...
        </div>
    </div>
    
    <!-- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
    <div id="unblockedState" class="hidden">
        <div class="unblocked-icon">‚úÖ</div>
        <div class="unblocked-title">–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å</div>
        <div class="unblocked-message">
            –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ú–∞—Ä–∫–µ—Ç–æ–º
        </div>
        <div class="blocked-message">
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–∫—Ä–æ–π—Ç–µ –∏ –∑–∞–Ω–æ–≤–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –º–∏–Ω–∏–∞–ø–ø
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const blockedState = document.getElementById('blockedState');
    const unblockedState = document.getElementById('unblockedState');
    const blockedUntil = document.getElementById('blockedUntil');
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞—Ç—É —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–∑ localStorage
    const unblockDate = localStorage.getItem('unblockDate');
    
    if (unblockDate) {
        const now = new Date();
        const date = new Date(unblockDate);
        
        if (now >= date) {
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
            blockedState.classList.add('hidden');
            unblockedState.classList.remove('hidden');
        } else {
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –µ—â–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç
            blockedUntil.textContent = `–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${date.toLocaleString()}`;
        }
    } else {
        // –ü–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
        blockedUntil.textContent = '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç: –ù–ê–í–°–ï–ì–î–ê';
    }
    
    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    const navLinks = document.querySelectorAll('a[href]');
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            window.location.href = '/blocked';
        });
    });
    
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É "–Ω–∞–∑–∞–¥"
    window.history.pushState(null, null, window.location.href);
    window.addEventListener('popstate', () => {
        window.history.pushState(null, null, window.location.href);
    });
});
</script>
{% endblock %}